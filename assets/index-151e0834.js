import{r as n,A as I,u as T,aD as z,aQ as R,j as a,M as $,S as x,a as m,F,at as M,T as S,au as B,aR as N,aS as W,aT as J,as as O,I as Q,b as U}from"./index-f9bb7ea9.js";import{f as V,S as q,L as G}from"./Search-ccd72c33.js";import{D as H}from"./Dot-5e7824c3.js";import{L as K}from"./ListItem-b08e830a.js";import{E as X}from"./EyeOutlined-9f59fb0a.js";import"./visuallyHidden-14c3de6e.js";import"./Select-460c312c.js";import"./OutlinedInput-2363943f.js";import"./FormControl-d662ece9.js";import"./InputAdornment-f5466c57.js";const Y=(t,r)=>m(K,{disablePadding:!0,children:[a(N,{children:a(W,{alt:`Avatar ${t}`,src:r})}),a(J,{id:`label-avatar-${t}`,primary:`${t}`})]},t),Z=({status:t})=>{let r;switch(t.toLowerCase()){case"postulado":r="error";break;case"assessment completado":r="warning";break;case"evaluado":r="info";break;case"preoceso finalizado":r="success";break}return m(x,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-end",children:[a(S,{children:t}),a(H,{color:r})]})};function aa(t,r,s,p,h,d){return{candidate:r,profession:s,status:Z({status:p}),accessDate:h,evaluation:d,actions:a("div",{style:{display:"flex",justifyContent:"flex-end"},children:a(O,{title:"Ver candidato",children:a(Q,{"aria-label":"delete",color:"primary",component:U,to:t,children:a(X,{})})})})}}const ea=[{id:"candidates",numeric:!1,disablePadding:!0,label:"Candidato",sortable:!0,align:"left"},{id:"profession",numeric:!1,disablePadding:!1,label:"Profesión",sortable:!0,align:"right"},{id:"status",numeric:!1,disablePadding:!1,label:"Estado",sortable:!0,align:"right"},{id:"accessDate",numeric:!1,disablePadding:!1,label:"Fecha de postulación",sortable:!0,align:"right"},{id:"evaluation",numeric:!0,disablePadding:!1,label:"Evaluación",sortable:!0,align:"right"},{id:"actions",numeric:!1,disablePadding:!1,label:"Acciones",sortable:!1,align:"right"}],ua=()=>{const{token:t,userData:r}=n.useContext(I),{data:s,isLoading:p,hasError:h,postAWS:d}=T();let{job_id:b}=z();const[_,P]=n.useState([]),[l,v]=n.useState(""),[C,w]=n.useState("No se han encontrado registros"),[g,f]=n.useState(1),[c,L]=n.useState(5),[y,E]=n.useState(0),A=(i,e)=>{f(e+1),u(e+1)},j=i=>{const e=parseInt(i.target.value,10);L(e),f(1),u(1,e)},u=async(i=null,e)=>{if(l.trim()!==""){await k(l,i||g,e||c);return}await d("https://aivx2bpza7.execute-api.us-east-1.amazonaws.com/prod/cargos","get_all_job_applications",{id_cargo:b,cantidad_por_pagina:e||c,pagina:i||g},t)},k=async(i,e=null,o)=>{await d("https://aivx2bpza7.execute-api.us-east-1.amazonaws.com/prod/cargos","search_job_applications",{id_cargo:b,nombre_buscado:i,cantidad_por_pagina:o||c,pagina:e||g},t)};return n.useEffect(()=>{l.trim()!==""?(f(1),u(1,c)):u()},[l]),n.useEffect(()=>{if(s)if(s.success){if(s.data&&s.data.postulaciones){const i=s.data.postulaciones;if(i.length>0){let e=[];i.forEach(o=>{const D=aa(o.id_usuario_candidato,Y(`${o.nombres_candidato} ${o.apellidos_candidato}`,R(o.foto_candidato)),o.titulo_profesional,o.estado_postulacion,V(o.fecha_de_postulacion),o.calificacion_final||"--");e=[...e,D]}),P(e),E(s.data.elementos_totales)}else P([]),w(s.message)}}else s.message&&w(s.message)},[s]),a($,{title:"Candidatos para el cargo",secondary:a(x,{direction:"row",spacing:2,children:a(q,{searchString:l,setSearchString:v})}),returnButton:!0,children:p?m(F,{children:[a(M,{}),a(S,{sx:{width:"100%",textAlign:"left",fontWeight:"medium"},children:"Cargando..."})]}):_.length>0?a(G,{rows:_,headCells:ea,controllerPage:g,controllerRowsPerPage:c,changePage:A,changeRowsPerPage:j,totalElements:y}):a(B,{severity:"info",children:C})})};export{ua as default};
