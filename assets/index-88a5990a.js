import{r,C as O,A as y,u as D,a as x,j as a,as as w,I as S,b as E,p as R,M as B,S as A,O as M,F as W,at as q,T as j,au as N}from"./index-5c44cf89.js";import{S as $,L as U,f as V}from"./Search-7b655563.js";import{A as G}from"./ActionDelete-f7563e5d.js";import{D as H}from"./DeleteOutlined-75a90ccf.js";import{E as K}from"./EyeOutlined-82726049.js";import{D as Q}from"./Dot-d0b66850.js";import{P as X}from"./PlusOutlined-5a5bb3ba.js";import"./visuallyHidden-14c3de6e.js";import"./Select-292d2541.js";import"./OutlinedInput-acc43fe5.js";import"./FormControl-de68b7ca.js";import"./InputAdornment-6fc71513.js";import"./LoadingButton-35a5f9c8.js";const Y=({idCargo:n,nombreCargo:s,onFinish:e,urlDelete:m,actionDelete:b,dataDelete:d})=>{const{openAlert:l}=r.useContext(O),{token:h}=r.useContext(y),{data:u,isLoading:P,hasError:C,postAWS:_}=D(),g=()=>{l("Por favor confirma que deseas eliminar el cargo: "+s,"warning",a(G,{callback:p}))},p=async()=>{const i=await _(m,b,d,h);i.success?l(i.message,"success"):l(`${i.message}: ${i.error}`,"error"),e()};return x("div",{style:{display:"flex",justifyContent:"flex-end"},children:[a(w,{title:"Ver más detalles",children:a(S,{"aria-label":"delete",color:"primary",component:E,to:n,children:a(K,{})})}),a(w,{title:"Eliminar cargo",children:a(S,{"aria-label":"delete",color:"error",onClick:g,children:a(H,{})})})]})},v=n=>{let s,e;return n?(s="success",e="Publicado"):(s="error",e="Sin publicar"),x(A,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-end",children:[a(j,{children:e}),a(Q,{color:s})]})};v.propTypes={status:R.number};const Z=[{id:"name",numeric:!1,disablePadding:!0,label:"Nombre del cargo",sortable:!0,align:"left"},{id:"role",numeric:!1,disablePadding:!1,label:"Rol",sortable:!0,align:"right"},{id:"status",numeric:!1,disablePadding:!1,label:"Estado",sortable:!0,align:"right"},{id:"creationDate",numeric:!1,disablePadding:!1,label:"Fecha de creación",sortable:!0,align:"right"},{id:"candidates",numeric:!0,disablePadding:!1,label:"Candidatos",sortable:!0,align:"right"},{id:"actions",numeric:!1,disablePadding:!1,label:"Acciones",sortable:!1,align:"right"}];function ee(n,s,e,m,b,d,l){return{name:s,role:e,status:v(m),creationDate:V(b),candidates:d,actions:a(Y,{idCargo:n,nombreCargo:s,onFinish:l,urlDelete:"https://aivx2bpza7.execute-api.us-east-1.amazonaws.com/prod/cargos",actionDelete:"delete_job",dataDelete:{id:n}})}}const pe=()=>{const{token:n,userData:s}=r.useContext(y),{data:e,isLoading:m,hasError:b,postAWS:d}=D(),[l,h]=r.useState([]),[u,P]=r.useState(""),[C,_]=r.useState("No se han encontrado registros"),[g,p]=r.useState(1),[i,L]=r.useState(5),[I,T]=r.useState(0),k=(o,t)=>{p(t+1),f(t+1)},z=o=>{const t=parseInt(o.target.value,10);L(t),p(1),f(1,t)},f=async(o=null,t)=>{if(u.trim()!==""){await J(u,o||g,t||i);return}await d("https://aivx2bpza7.execute-api.us-east-1.amazonaws.com/prod/cargos","get_all_jobs",{id_usuario_administrador:s.id,cantidad_por_pagina:t||i,pagina:o||g},n)},J=async(o,t=null,c)=>{await d("https://aivx2bpza7.execute-api.us-east-1.amazonaws.com/prod/cargos","search_by_name_jobs",{id_usuario_administrador:s.id,nombre_buscado:o,cantidad_por_pagina:c||i,pagina:t||g},n)};return r.useEffect(()=>{u.trim()!=""?(p(1),f(1,i)):f()},[u]),r.useEffect(()=>{if(e)if(e.success){if(e.data&&e.data.cargos){const o=e.data.cargos;if(o.length>0){let t=[];o.forEach(c=>{const F=ee(c.id,c.nombre,"Creador",c.publicado,c.fecha_de_registro,c.numero_de_postulaciones,f);t=[...t,F]}),h(t),T(e.data.elementos_totales)}else h([]),_(e.message)}}else e.message&&_(e.message)},[e]),a(B,{title:"Cargos",secondary:x(A,{direction:"row",spacing:2,children:[a($,{searchString:u,setSearchString:P}),a(M,{variant:"outlined",startIcon:a(X,{}),component:E,to:"nuevo",children:"Crear cargo"})]}),children:m?x(W,{children:[a(q,{}),a(j,{sx:{width:"100%",textAlign:"left",fontWeight:"medium"},children:"Cargando..."})]}):l.length>0?a(U,{rows:l,headCells:Z,controllerPage:g,controllerRowsPerPage:i,changePage:k,changeRowsPerPage:z,totalElements:I}):a(N,{severity:"info",children:C})})};export{pe as default};
