import{r as n,A as L,C as W,aD as C,u as c,ag as J,a as b,M as f,j as a,at as q,T as $,au as I,G as h}from"./index-5c44cf89.js";import{J as P}from"./index-52321dd4.js";import{A as k}from"./ActionDelete-f7563e5d.js";import{L as _}from"./LoadingButton-35a5f9c8.js";import{S as B}from"./SaveOutlined-e7d4d93f.js";import{D as G}from"./DeleteOutlined-75a90ccf.js";import"./formik.esm-659644ab.js";import"./OutlinedInput-acc43fe5.js";import"./InputAdornment-6fc71513.js";import"./MinusOutlined-c729137c.js";import"./Select-292d2541.js";const te=()=>{const{token:d}=n.useContext(L),{openAlert:i}=n.useContext(W);let{job_id:l}=C();const{data:o,isLoading:x,hasError:H,postAWS:v}=c(),{data:T,isLoading:u,hasError:F,postAWS:y}=c(),{data:M,isLoading:m,hasError:O,postAWS:j}=c(),{postAWS:A}=c(),[r,p]=n.useState(null),D=J(),S=async s=>{await v("https://aivx2bpza7.execute-api.us-east-1.amazonaws.com/prod/cargos","get_job",{id:l},d)},E=async()=>{const s=async()=>{const t=await j("https://aivx2bpza7.execute-api.us-east-1.amazonaws.com/prod/cargos","delete_job",{id:l},d);t.success?(i(t.message,"success"),D("/cargos")):i(`${t.message}: ${t.error}`,"error")};i("Por favor confirma que deseas eliminar el cargo: "+o.data.nombre,"warning",a(k,{callback:s}))},w=async s=>{const t={...s,id:l},e=await y("https://aivx2bpza7.execute-api.us-east-1.amazonaws.com/prod/cargos","update_job",t,d);e.success?i(e.message,"success"):i(`${e.message}: ${e.error}`,"error")},z=async()=>{var g;let s=[];const t=await A("https://aivx2bpza7.execute-api.us-east-1.amazonaws.com/prod/usuarios","get_by_name_parameters",{nombre_tipo_parametro:"moneda"},null);t.success&&(s=(g=t.data)==null?void 0:g.parametros);const e=o.data;p({jobname:e.nombre,jobtitle:e.titulo_profesional_requerido,jobcompany:e.empresa_oferente,jobsalarymin:e.minimo_salario_mensual,jobsalarymax:e.maximo_salario_mensual,currency:e.id_parametro_moneda,ubication:e.ubicacion,remotejob:e.trabajo_remoto,description:e.descripcion,requirements:e.requisitos,process:e.proceso_de_contratacion,vacancies:e.vacantes,published:e.publicado,assessment:e.id_assessment,currencies:s})};return n.useEffect(()=>{if(o){if(!o.success){i(`${o.message}: ${o.error}`,"error"),p({error:"Lo sentimos, no se ha podido acceder a la información de este curso"});return}z()}},[o]),n.useEffect(()=>{S()},[]),x||!r?b(f,{title:"Detalles del cargo",returnButton:!0,children:[a(q,{}),a($,{sx:{width:"100%",textAlign:"left",fontWeight:"medium"},children:"Cargando..."})]}):a(f,{title:r.error?"Sin información del cargo":`Detalles del cargo: ${r==null?void 0:r.jobname}`,returnButton:!0,children:r.error?a(I,{severity:"info",children:r.error}):b(P,{...r,handleSubmitParent:w,children:[a(h,{item:!0,xs:12,md:6,children:a(_,{type:"submit",disableElevation:!0,disabled:u||m,fullWidth:!0,size:"large",variant:"contained",color:"primary",loading:u,loadingPosition:"start",startIcon:a(B,{}),children:"Guardar"})}),a(h,{item:!0,xs:12,md:6,children:a(_,{disableElevation:!0,disabled:u||m,fullWidth:!0,size:"large",variant:"contained",color:"error",onClick:E,loading:m,loadingPosition:"start",startIcon:a(G,{}),children:"Eliminar"})})]})})};export{te as default};
